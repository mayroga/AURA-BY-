<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AURA by May Roga LLC</title>
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; background: #000; color: #fff; margin: 0; text-align: center; }
  .marquee { background: #001a33; border-bottom: 2px solid #00d4ff; overflow: hidden; white-space: nowrap; padding: 15px 0; }
  .marquee-content { display: inline-block; animation: scroll 40s linear infinite; color: #00d4ff; font-weight: 900; font-size: 1.1rem; }
  @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
  .container { max-width: 950px; margin: auto; padding: 20px; border: 3px solid #00d4ff; border-radius: 40px; background: #080808; margin-top: 15px; }
  .yellow { color: #ffff00; font-weight: bold; font-size: 1.6rem; }
  .search-hero { font-size: 1.2rem; color: #00d4ff; font-weight: bold; margin: 20px 0; border: 1px dashed #00d4ff; padding: 25px; border-radius: 25px; line-height: 1.6; background: rgba(0,212,255,0.05); }
  .plan-card { border: 2px solid #00d4ff; border-radius: 25px; padding: 15px; margin: 8px; display: inline-block; width: 28%; vertical-align: top; background: #0a0a0a; transition: 0.3s; }
  .btn-pay { background: #00d4ff; color: #000; border: none; padding: 18px; border-radius: 15px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.2rem; transition: 0.3s; }
  .btn-pay:hover { background: #ffff00; transform: scale(1.02); }
  input { padding: 20px; border-radius: 15px; border: 2px solid #00d4ff; background: #000; color: #fff; margin: 10px; font-size: 1.2rem; width: 100%; box-sizing: border-box; }
  .res-box { text-align: left; padding: 30px; border: 2px solid #ffff00; background: #050505; margin-top: 25px; font-size: 1.15rem; line-height: 1.7; border-radius: 25px; display: none; }
  .res-ask { color: #00d4ff; font-weight: 900; text-decoration: underline; }
  .donacion-box { border: 5px solid #ffff00; border-radius: 40px; padding: 35px; margin-top: 45px; background: rgba(255,255,0,0.05); }
  .btn-donar { background: #ffff00; color: #000; border: none; padding: 22px; border-radius: 20px; font-weight: 900; width: 100%; cursor: pointer; font-size: 1.7rem; box-shadow: 0 0 15px #ffff00; }
  .btn-ex { padding: 14px 20px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; margin: 5px; color: white; transition: 0.3s; }
  .clear-btn { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: #222; color: #00d4ff; border: 1px solid #00d4ff; border-radius: 8px; padding: 8px 12px; cursor: pointer; }
  #geo-txt { color: #ffff00; font-size: 1rem; margin-bottom: 12px; font-weight: 900; text-transform: uppercase; }
  .doubt-section { margin-top: 25px; border: 2px solid #00d4ff; padding: 25px; border-radius: 30px; background: #0a0a0a; display: none; }
  .legal-box { margin-top: 40px; border-top: 1px solid #444; padding-top: 25px; font-size: 0.85rem; color: #888; text-align: justify; line-height: 1.4; }
</style>
</head>
<body>

<div class="marquee">
  <div class="marquee-content" id="marquee-text">
      AURA BY MAY ROGA LLC: TRANSPARENCIA EN COSTOS DE SALUD ‚Ä¢ ROMPIENDO LA OPACIDAD DEL SISTEMA ‚Ä¢ PRECIOS JUSTOS PARA QUIENES NO TIENEN SEGURO ‚Ä¢ INFORMACI√ìN DE AHORRO NACIONAL ‚Ä¢ 
  </div>
</div>

<div class="container">
  <h1 style="color: #00d4ff; font-size: 5rem; margin: 0;">AURA</h1>
  <div class="yellow">by May Roga LLC</div>

  <div class="search-hero" id="search-hero">
    ENCUENTRE EL PRECIO M√ÅS BAJO PARA SU PROCEDIMIENTO.<br>
    Analizamos ZIP Codes, Condados y los 50 Estados para que usted no pague de m√°s.
  </div>

  <div class="lang-box">
    <button class="btn-ex" style="background:#00d4ff; color:#000;" onclick="changeLang('es')">ESPA√ëOL</button>
    <button class="btn-ex" style="background:#fff; color:#000;" onclick="changeLang('en')">ENGLISH</button>
    <button class="btn-ex" style="background:#ff4d4d; color:#000;" onclick="changeLang('ht')">KREY√íL</button>
  </div>

  <div id="paywall">
    <div class="plan-card"><h4>CONSULTA R√ÅPIDA</h4><p>$5.99</p><button class="btn-pay" onclick="pagar('rapido')">ACCEDER AHORA</button></div>
    <div class="plan-card"><h4>STANDARD</h4><p>$9.99</p><button class="btn-pay" onclick="pagar('standard')">ACCEDER AHORA</button></div>
    <div class="plan-card"><h4>ESPECIAL</h4><p>$19.99</p><button class="btn-pay" onclick="pagar('special')">ACCEDER AHORA</button></div>
  </div>

  <div id="sistema-aura" style="display:none;">
    <div id="geo-txt">DETERMINANDO UBICACI√ìN...</div>
    <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 15px;">
        <button onclick="listen()" style="font-size:3rem; background:none; border:none; cursor:pointer;">üé§</button>
        <button onclick="readOut()" style="font-size:3rem; background:none; border:none; cursor:pointer;">üîä</button>
    </div>
    <div style="position:relative; width:90%; margin:auto;">
      <input type="text" id="q" placeholder="Ej: MRI de rodilla, Limpieza dental, D2750...">
      <button class="clear-btn" onclick="document.getElementById('q').value=''">X</button>
    </div>
    <button class="btn-pay" onclick="getEstimate()" style="font-size:1.8rem; margin-top:25px; width:90%;">REVELAR PRECIOS DE AHORRO</button>
    
    <div id="res" class="res-box"></div>
    
    <div id="export-bar" style="display:none; margin-top:20px;">
      <button class="btn-ex" style="background:#25d366;" onclick="shareWA()">WhatsApp</button>
      <button class="btn-ex" style="background:#ff9500;" onclick="exportPDF()">PDF / Imprimir</button>
    </div>

    <div id="doubt-section" class="doubt-section">
      <h3 style="color:#ffff00;">¬øDUDA SOBRE EL PRECIO? ACLARE AQU√ç</h3>
      <input type="text" id="doubt-q" placeholder="Escriba su pregunta para Aura...">
      <button class="btn-pay" onclick="askAura()">OBTENER RESPUESTA</button>
      <div id="doubt-res" style="margin-top:15px; color:#00d4ff; text-align: left;"></div>
    </div>
  </div>

  <div class="donacion-box">
    <h2 style="color:#ffff00; margin-top:0;">FONDO DE SOLIDARIDAD Y EMPLEO</h2>
    <p>Ay√∫denos a mantener este sistema libre de la influencia de las aseguradoras.</p>
    <button class="btn-donar" onclick="pagar('donacion')">DONACI√ìN VOLUNTARIA</button>
  </div>

  <div class="legal-box">
    <strong>BLINDAJE LEGAL:</strong> Este reporte es emitido por Aura by May Roga LLC, agencia independiente de datos. La informaci√≥n aqu√≠ presentada es un ESTIMADO EDUCATIVO de mercado basado en registros de transparencia. No constituye una oferta comercial ni asesor√≠a m√©dica. Los precios finales son responsabilidad exclusiva de los proveedores. May Roga LLC no garantiza la aceptaci√≥n de estos precios por parte de hospitales o aseguradoras.
  </div>
</div>

<script>
let currentLang = 'es';
let userZip = "";

async function getGeo() {
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(async pos=>{
      try {
        const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&localityLanguage=${currentLang}`);
        const data = await r.json();
        userZip = data.postcode || "USA General";
        document.getElementById('geo-txt').innerText = `ZONA DETECTADA: ${userZip}`;
      } catch { document.getElementById('geo-txt').innerText = "ZONA: USA GENERAL"; }
    });
  }
}

window.onload = () => {
  getGeo();
  if(new URLSearchParams(window.location.search).has('success')) {
    document.getElementById('paywall').style.display='none';
    document.getElementById('sistema-aura').style.display='block';
  }
};

async function getEstimate() {
  const q = document.getElementById('q').value.trim();
  const resDiv = document.getElementById('res');
  resDiv.style.display='block';
  resDiv.innerHTML = "<h2 style='color:#ffff00;'>Buscando los precios m√°s bajos en la naci√≥n...</h2>";
  
  const fd = new FormData();
  fd.append("consulta", q);
  fd.append("lang", currentLang);
  fd.append("zip_user", userZip);

  try {
    const r = await fetch("/estimado", {method:"POST", body:fd});
    const d = await r.json();
    resDiv.innerHTML = d.resultado;
    document.getElementById('export-bar').style.display='block';
    document.getElementById('doubt-section').style.display='block';
  } catch { resDiv.innerText = "Error en el sistema. Intente de nuevo."; }
}

async function askAura() {
  const q = document.getElementById('doubt-q').value;
  const ctx = document.getElementById('res').innerText;
  const dr = document.getElementById('doubt-res');
  dr.innerText = "Aura respondiendo...";
  const fd = new FormData();
  fd.append("pregunta", q);
  fd.append("contexto", ctx);
  const r = await fetch("/aclarar-duda", {method:"POST", body:fd});
  const d = await r.json();
  dr.innerHTML = "<strong>Explicaci√≥n:</strong> " + d.resultado;
}

function listen(){
  const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  rec.lang = currentLang==='es'?'es-US':'en-US';
  rec.onresult = e => { document.getElementById('q').value = e.results[0][0].transcript; };
  rec.start();
}

function readOut(){ const ut = new SpeechSynthesisUtterance(document.getElementById('res').innerText); window.speechSynthesis.speak(ut); }
function exportPDF(){ window.print(); }
function shareWA(){ window.open("https://wa.me/?text="+encodeURIComponent(document.getElementById('res').innerText)); }
function pagar(p){ if(p==='donacion') window.location.href="https://buy.stripe.com/28E00igMD8dR00v5vl7Vm0h"; }
</script>
</body>
</html>
