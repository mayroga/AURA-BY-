<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AURA by May Roga LLC</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #000; color: #fff; text-align: center; }
        .container { max-width: 1100px; margin: auto; padding: 20px; border: 2px solid #00d4ff; border-radius: 30px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #0a0a0a; color: #fff; }
        th, td { border: 1px solid #333; padding: 12px; text-align: left; }
        th { background: #00d4ff; color: #000; }
        .yellow { color: #ffff00; font-weight: bold; }
        .res-box { padding: 20px; background: #050505; border-radius: 20px; margin-top: 20px; text-align: left; border: 1px solid #444; }
        .btn-pay { background: #00d4ff; color: #000; padding: 15px 30px; border-radius: 10px; font-weight: bold; cursor: pointer; border: none; font-size: 1.2rem; }
        .doubt-section { border: 2px solid #ffff00; padding: 20px; margin-top: 30px; border-radius: 20px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="color: #00d4ff;">AURA <span style="font-size: 1rem; color: #ffff00;">by May Roga LLC</span></h1>
    
    <div id="paywall">
        <button class="btn-pay" onclick="pagar('standard')">ACCESO $9.99</button>
    </div>

    <div id="sistema-aura" style="display:none;">
        <input type="text" id="q" placeholder="¿Qué procedimiento busca? (Ej: Root Canal Miami)" style="width: 80%; padding: 15px; border-radius: 10px;">
        <button class="btn-pay" onclick="getEstimate()">REVELAR COMPARATIVA AURA</button>
        
        <div id="res" class="res-box"></div>

        <div id="doubt-section" class="doubt-section">
            <h3 class="yellow">¿TIENE DUDAS SOBRE ESTOS PRECIOS?</h3>
            <p>Como cliente pagado, usted tiene derecho a una aclaración profesional.</p>
            <input type="text" id="doubt-q" placeholder="Escriba su duda aquí..." style="width: 70%; padding: 10px;">
            <button onclick="askAura()" style="padding: 10px; background: #ffff00; font-weight: bold;">ACLARAR CON ASESOR</button>
            <div id="doubt-res" style="margin-top: 15px; border-left: 3px solid #ffff00; padding-left: 10px;"></div>
        </div>
    </div>
</div>

<script>
    async function getEstimate() {
        const q = document.getElementById('q').value;
        const resDiv = document.getElementById('res');
        resDiv.innerHTML = "<p class='yellow'>AURA está consultando los repositorios AMA/ADA 2026 y CMS...</p>";
        
        const fd = new FormData();
        fd.append("consulta", q);
        fd.append("zip_user", "33101"); // Ejemplo de Miami

        const r = await fetch("/estimado", {method:"POST", body:fd});
        const d = await r.json();
        resDiv.innerHTML = d.resultado;
        document.getElementById('doubt-section').style.display = 'block';
    }

    async function askAura() {
        const q = document.getElementById('doubt-q').value;
        const contexto = document.getElementById('res').innerText;
        const resDuda = document.getElementById('doubt-res');
        resDuda.innerHTML = "Asesor analizando su caso...";
        
        const fd = new FormData();
        fd.append("pregunta", q);
        fd.append("contexto", contexto);

        const r = await fetch("/aclarar-duda", {method:"POST", body:fd});
        const d = await r.json();
        resDuda.innerHTML = `<strong>Respuesta del Asesor:</strong> <br>${d.resultado}`;
    }
    
    // Función de pago y login admin se mantienen igual
</script>
</body>
</html>
