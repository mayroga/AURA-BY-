<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA by May Roga LLC</title>
    <style>
        :root { --aura-blue: #00d4ff; --aura-yellow: #ffff00; --aura-bg: #080808; }
        body { font-family: 'Segoe UI', Arial; background: #000; color: #fff; margin: 0; text-align: center; }
        .marquee { background: #001a33; border-bottom: 2px solid var(--aura-blue); overflow: hidden; white-space: nowrap; padding: 15px 0; }
        .marquee-content { display: inline-block; animation: scroll 35s linear infinite; color: var(--aura-blue); font-weight: 900; font-size: 1.2rem; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
        
        .container { max-width: 950px; margin: auto; padding: 25px; border: 3px solid var(--aura-blue); border-radius: 40px; background: var(--aura-bg); margin-top: 10px; box-shadow: 0 0 20px rgba(0,212,255,0.2); }
        .yellow { color: var(--aura-yellow); font-weight: bold; font-size: 1.5rem; }
        .search-hero { font-size: 1.3rem; color: var(--aura-blue); font-weight: bold; margin: 20px 0; border: 1px dashed var(--aura-blue); padding: 20px; border-radius: 20px; }

        .plan-card { border: 2px solid var(--aura-blue); border-radius: 20px; padding: 15px; margin: 5px; display: inline-block; width: 28%; vertical-align: top; background: #0a0a0a; }
        .btn-pay { background: var(--aura-blue); color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; transition: 0.3s; font-size: 1rem; }
        .btn-pay:hover { background: var(--aura-yellow); }

        input { padding: 18px; border-radius: 15px; border: 2px solid var(--aura-blue); background: #000; color: #fff; margin: 10px; font-size: 1.2rem; width: 100%; box-sizing: border-box; }
        .res-box { text-align: left; padding: 25px; border: 1px dashed var(--aura-blue); background: #050505; margin-top: 25px; display: none; border-radius: 20px; line-height: 1.6; }
        
        .map-btn { display: none; background: #ff4d4d; color: white; padding: 15px; border-radius: 15px; text-decoration: none; font-weight: bold; margin-top: 15px; }
        .doubt-section { margin-top: 20px; border: 2px solid var(--aura-yellow); padding: 20px; border-radius: 25px; display: none; background: #111; }
        .legal-box { margin-top: 30px; font-size: 0.8rem; color: #777; border-top: 1px solid #333; padding-top: 15px; }
    </style>
</head>
<body>

<div class="marquee">
    <div class="marquee-content" id="marquee-text">
        AURA BY MAY ROGA LLC: MEDICAL PRICE ESTIMATES ‚Ä¢ TOTAL TRANSPARENCY ‚Ä¢ MARKET INTELLIGENCE ‚Ä¢ NOT MEDICAL ADVICE ‚Ä¢
    </div>
</div>

<div class="container">
    <h1 style="color: var(--aura-blue); font-size: 4.5rem; margin: 0;">AURA</h1>
    <div class="yellow">by May Roga LLC</div>

    <div class="lang-box" style="margin-top:15px;">
        <button onclick="changeLang('en')" style="background:#fff;">EN</button>
        <button onclick="changeLang('es')" style="background:var(--aura-blue);">ES</button>
    </div>

    <div id="paywall">
        <div class="plan-card"><h3>QUICK</h3><p>$5.99</p><button class="btn-pay" onclick="pagar('rapido')">ACCESS</button></div>
        <div class="plan-card"><h3>STANDARD</h3><p>$9.99</p><button class="btn-pay" onclick="pagar('standard')">ACCESS</button></div>
        <div class="plan-card"><h3>SPECIAL</h3><p>$19.99</p><button class="btn-pay" onclick="pagar('special')">ACCESS</button></div>
    </div>

    <div id="sistema-aura" style="display:none;">
        <div id="geo-txt" class="yellow">Detecting location...</div>
        <div style="position:relative; width:90%; margin:auto;">
            <input type="text" id="q" placeholder="Procedure, symptom or CPT code...">
        </div>
        <button class="btn-pay" onclick="getEstimate()" style="font-size:1.5rem; width:90%;">REVEAL AURA COMPARISON</button>
        
        <div id="res" class="res-box"></div>
        <a id="map-link" class="map-btn" href="#" target="_blank">üìç VIEW NEARBY CLINICS ON MAPS</a>

        <div id="export-bar" style="display:none; margin-top:15px;">
            <button onclick="window.print()" style="background:orange; padding:10px; border-radius:10px;">PDF / PRINT</button>
            <button onclick="readOut()" style="background:var(--aura-yellow); padding:10px; border-radius:10px;">LISTEN</button>
        </div>

        <div id="doubt-section" class="doubt-section">
            <h3 style="color:var(--aura-yellow);">HAVE DOUBTS ABOUT THIS REPORT?</h3>
            <input type="text" id="doubt-q" placeholder="Ask your follow-up question...">
            <button class="btn-pay" onclick="askAura()">CLEAR DOUBT</button>
            <div id="doubt-res" style="margin-top:15px; color:var(--aura-blue);"></div>
        </div>
    </div>

    <div class="legal-box">
        LEGAL SHIELD: This report is issued by Aura by May Roga LLC. We are not doctors, clinics, or insurers. This is an EDUCATIONAL ESTIMATE based on CMS public data and market ranges.
    </div>
</div>

<script>
    let currentLang = 'en';
    let userZip = "";

    // Geolocation
    window.onload = async () => {
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async pos => {
                const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&localityLanguage=en`);
                const data = await r.json();
                userZip = data.postcode || "";
                document.getElementById('geo-txt').innerText = userZip ? `Location: ZIP ${userZip}` : "Location: USA General";
            });
        }
        // Simulaci√≥n de √©xito de pago para desarrollo (Quitar en producci√≥n)
        if(window.location.search.includes('success')) {
            document.getElementById('paywall').style.display='none';
            document.getElementById('sistema-aura').style.display='block';
        }
    };

    async function getEstimate() {
        const q = document.getElementById('q').value;
        const resDiv = document.getElementById('res');
        resDiv.style.display='block';
        resDiv.innerHTML = "<h2 class='yellow'>Aura generating 3-3-5-1 Report...</h2>";

        const fd = new FormData();
        fd.append("consulta", q);
        fd.append("lang", currentLang);
        fd.append("zip_user", userZip);

        const r = await fetch("/estimado", {method:"POST", body:fd});
        const d = await r.json();
        resDiv.innerHTML = d.resultado;
        
        document.getElementById('map-link').href = `https://www.google.com/maps/search/${encodeURIComponent(q)}+near+${userZip}`;
        document.getElementById('map-link').style.display = 'block';
        document.getElementById('export-bar').style.display = 'block';
        document.getElementById('doubt-section').style.display = 'block';
    }

    async function askAura() {
        const fd = new FormData();
        fd.append("pregunta", document.getElementById('doubt-q').value);
        fd.append("contexto", document.getElementById('res').innerText);
        const r = await fetch("/aclarar-duda", {method:"POST", body:fd});
        const d = await r.json();
        document.getElementById('doubt-res').innerHTML = "<strong>Aura:</strong> " + d.resultado;
    }

    function readOut() {
        const msg = new SpeechSynthesisUtterance(document.getElementById('res').innerText);
        window.speechSynthesis.speak(msg);
    }

    function changeLang(l) { currentLang = l; alert("Language changed to " + l); }
</script>
</body>
</html>
