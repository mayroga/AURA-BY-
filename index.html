<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AURA by May Roga LLC</title>
<script src="https://js.stripe.com/v3/"></script>
<style>
  body { font-family: 'Segoe UI', Arial; background: #000; color: #fff; margin: 0; text-align: center; }
  .marquee { background: #001a33; border-bottom: 2px solid #00d4ff; overflow: hidden; white-space: nowrap; padding: 15px 0; }
  .marquee-content { display: inline-block; animation: scroll 35s linear infinite; color: #00d4ff; font-weight: 900; font-size: 1.2rem; }
  @keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }
  .container { max-width: 950px; margin: auto; padding: 25px; border: 3px solid #00d4ff; border-radius: 40px; background: #080808; margin-top: 10px; }
  .yellow { color: #ffff00; font-weight: bold; font-size: 1.5rem; }
  .search-hero { font-size: 1.3rem; color: #00d4ff; font-weight: bold; margin: 20px 0; border: 1px dashed #00d4ff; padding: 20px; border-radius: 20px; line-height: 1.5; }
  .plan-card { border: 2px solid #00d4ff; border-radius: 20px; padding: 15px; margin: 10px; display: inline-block; width: 28%; vertical-align: top; background: #0a0a0a; }
  .btn-pay { background: #00d4ff; color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.1rem; transition: 0.3s; }
  
  /* Layout Ajustado: Entrada y Borrar */
  .input-wrapper { display: flex; gap: 10px; width: 85%; margin: 20px auto; align-items: center; }
  input { padding: 18px; border-radius: 15px; border: 2px solid #00d4ff; background: #000; color: #fff; font-size: 1.2rem; flex-grow: 1; box-sizing: border-box; }
  .clear-btn { background: #333; color: #ff4d4d; border: 2px solid #ff4d4d; border-radius: 12px; padding: 15px; cursor: pointer; font-weight: bold; }
  
  .res-box { text-align: left; padding: 25px; border: 1px dashed #00d4ff; background: #050505; margin-top: 25px; font-size: 1.1rem; line-height: 1.6; display: none; border-radius: 20px; }
  .donacion-box { border: 5px solid #ffff00; border-radius: 35px; padding: 30px; margin-top: 40px; }
  .btn-donar { background: #ffff00; color: #000; border: none; padding: 20px; border-radius: 15px; font-weight: 900; width: 100%; cursor: pointer; font-size: 1.6rem; }
  .btn-ex { padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; margin: 5px; color: white; }
  #geo-txt { color: #ffff00; font-size: 0.9rem; margin-bottom: 10px; font-weight: bold; }
  .login-box { margin: 20px auto; padding: 20px; border: 2px solid #00d4ff; border-radius: 25px; max-width: 400px; background: #0a0a0a; }
  .login-box input { width: 80%; margin: 10px auto; display: block; }
  .map-btn { display: block; background: #ff4d4d; color: white; padding: 15px; border-radius: 15px; text-decoration: none; font-weight: bold; margin-top: 15px; }
  .doubt-section { margin-top: 20px; border: 2px solid #ffff00; padding: 20px; border-radius: 25px; display: none; }
</style>
</head>
<body>

<div class="marquee">
  <div class="marquee-content" id="txt-marquee">
      AURA BY MAY ROGA LLC: ESTIMADOS DE PRECIOS M√âDICOS PARA CONSUMIDORES ‚Ä¢ TRANSPARENCIA TOTAL ‚Ä¢ NO SOMOS M√âDICOS NI ASEGURADORAS ‚Ä¢ SOLO INFORMACI√ìN DE MERCADO ‚Ä¢
  </div>
</div>

<div class="container">
  <h1 style="color: #00d4ff; font-size: 4rem; margin: 0;">AURA</h1>
  <div class="yellow">by May Roga LLC</div>

  <div class="search-hero" id="txt-hero">
    CONSULTA ESTIMADOS DE PRECIOS M√âDICOS Y DENTALES EN USA.<br>
    Introduce procedimiento, s√≠ntoma, c√≥digo o ubicaci√≥n. Obt√©n rango de mercado y precio justo.
  </div>

  <div class="lang-box">
    <button class="btn-ex" style="background:#00d4ff; color:#000;" onclick="changeLang('es')">ES</button>
    <button class="btn-ex" style="background:#fff; color:#000;" onclick="changeLang('en')">EN</button>
    <button class="btn-ex" style="background:#ff4d4d; color:#000;" onclick="changeLang('ht')">CREOL</button>
  </div>

  <div class="login-box">
    <input type="text" id="admin-user" placeholder="Usuario Admin">
    <input type="password" id="admin-pass" placeholder="Contrase√±a">
    <button class="btn-pay" onclick="loginAdmin()" id="txt-btn-admin">ACCEDER GRATIS</button>
  </div>

  <div id="paywall">
    <div class="plan-card"><h4 id="txt-p1">C. R√ÅPIDA</h4><p>$5.99</p><button class="btn-pay" onclick="pagar('rapido')">PAGAR ACCESO</button></div>
    <div class="plan-card"><h4 id="txt-p2">STANDARD</h4><p>$9.99</p><button class="btn-pay" onclick="pagar('standard')">PAGAR ACCESO</button></div>
    <div class="plan-card"><h4 id="txt-p3">ESPECIAL</h4><p>$19.99</p><button class="btn-pay" onclick="pagar('special')">PAGAR ACCESO</button></div>
  </div>

  <div id="sistema-aura" style="display:none;">
    <div id="geo-txt">Detectando ubicaci√≥n...</div>
    <div class="input-wrapper">
      <input type="text" id="q" placeholder="MRI, D2750...">
      <button class="clear-btn" onclick="document.getElementById('q').value=''" id="txt-btn-clear">BORRAR</button>
    </div>
    <button class="btn-pay" onclick="getEstimate()" style="font-size:1.8rem; width:85%;" id="txt-btn-reveal">REVELAR COMPARATIVA AURA</button>
   
    <div id="res" class="res-box"></div>
   
    <a id="map-link" class="map-btn" href="#" target="_blank" style="display:none;">üìç VER CL√çNICAS EN GOOGLE MAPS</a>

    <div id="export-bar" style="display:none; margin-top:20px;">
      <button class="btn-ex" style="background:#25d366;" onclick="shareWA()">WhatsApp</button>
      <button class="btn-ex" style="background:#ffff00; color:#000;" onclick="readOut()" id="txt-btn-listen">Escuchar</button>
      <button class="btn-ex" style="background:#ff9500; color:#000;" onclick="window.print()">PDF / Print</button>
    </div>

    <div id="doubt-section" class="doubt-section">
      <h3 style="color:#ffff00;" id="txt-doubt-title">¬øTIENE DUDAS SOBRE ESTE REPORTE?</h3>
      <input type="text" id="doubt-q" placeholder="...">
      <button class="btn-pay" onclick="askAura()" id="txt-btn-doubt">ACLARAR DUDA</button>
      <div id="doubt-res" style="margin-top:15px; color:#00d4ff;"></div>
    </div>

    <div class="legal-box" id="txt-legal">
       BLINDAJE LEGAL: Este reporte es emitido por Aura by May Roga LLC...
    </div>
  </div>

  <div class="donacion-box">
    <h2 style="color:#ffff00; margin-top:0;" id="txt-solidarity">FONDO DE SOLIDARIDAD Y EMPLEO</h2>
    <button class="btn-donar" onclick="pagar('donacion')" id="txt-btn-donar">REALIZAR DONACI√ìN VOLUNTARIA</button>
  </div>
</div>

<script>
let currentLang = 'es';
let userZip = "";

const texts = {
  es: {
    hero: "CONSULTA ESTIMADOS DE PRECIOS M√âDICOS Y DENTALES EN USA.",
    p1: "C. R√ÅPIDA", p2: "STANDARD", p3: "ESPECIAL",
    btn_clear: "BORRAR", btn_reveal: "REVELAR COMPARATIVA AURA",
    listen: "Escuchar", doubt_title: "¬øTIENE DUDAS?", btn_doubt: "ACLARAR DUDA",
    solidarity: "FONDO DE SOLIDARIDAD Y EMPLEO", btn_donar: "REALIZAR DONACI√ìN VOLUNTARIA"
  },
  en: {
    hero: "CONSULT USA MEDICAL & DENTAL PRICE ESTIMATES.",
    p1: "QUICK SEARCH", p2: "STANDARD", p3: "SPECIAL",
    btn_clear: "CLEAR", btn_reveal: "REVEAL AURA COMPARISON",
    listen: "Listen", doubt_title: "HAVE QUESTIONS?", btn_doubt: "CLARIFY DOUBT",
    solidarity: "SOLIDARITY & EMPLOYMENT FUND", btn_donar: "MAKE VOLUNTARY DONATION"
  },
  ht: {
    hero: "KONSILTE ESTIMASYON PRI MEDIKAL AK DANT√à OZE.",
    p1: "CH√àCH√à RAPID", p2: "ESTANDA", p3: "ESPESYAL",
    btn_clear: "EFASE", btn_reveal: "REVELE KONPARAZON AURA",
    listen: "Koute", doubt_title: "GEN KESTYON?", btn_doubt: "KLARE DUD",
    solidarity: "FONDASYON SOLIDARITE AK ANPLWA", btn_donar: "F√à YON DON VOLONT√à"
  }
};

function changeLang(l) {
  currentLang = l;
  const t = texts[l];
  document.getElementById('txt-hero').innerHTML = t.hero;
  document.getElementById('txt-p1').innerText = t.p1;
  document.getElementById('txt-p2').innerText = t.p2;
  document.getElementById('txt-p3').innerText = t.p3;
  document.getElementById('txt-btn-clear').innerText = t.btn_clear;
  document.getElementById('txt-btn-reveal').innerText = t.btn_reveal;
  document.getElementById('txt-btn-listen').innerText = t.listen;
  document.getElementById('txt-doubt-title').innerText = t.doubt_title;
  document.getElementById('txt-btn-doubt').innerText = t.btn_doubt;
  document.getElementById('txt-solidarity').innerText = t.solidarity;
  document.getElementById('txt-btn-donar').innerText = t.btn_donar;
}

async function getGeo() {
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(async pos=>{
      try {
        const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&localityLanguage=en`);
        const data = await r.json();
        userZip = data.postcode || "";
        document.getElementById('geo-txt').innerText = `ZIP: ${userZip}`;
      } catch { document.getElementById('geo-txt').innerText = "Location active."; }
    });
  }
}
window.onload = getGeo;

async function pagar(plan) {
  const r = await fetch("/create-checkout-session", {
    method: "POST",
    headers: {"Content-Type": "application/x-www-form-urlencoded"},
    body: `plan=${plan}`
  });
  const session = await r.json();
  const stripe = Stripe('TU_STRIPE_PUBLIC_KEY_AQUI');
  stripe.redirectToCheckout({ sessionId: session.id });
}

async function getEstimate() {
  const q = document.getElementById('q').value;
  const resDiv = document.getElementById('res');
  resDiv.style.display='block';
  resDiv.innerHTML = "<h2 class='yellow'>Aura processing...</h2>";
  const fd = new FormData();
  fd.append("consulta", q);
  fd.append("lang", currentLang);
  fd.append("zip_user", userZip);
  const r = await fetch("/estimado", {method:"POST", body:fd});
  const d = await r.json();
  resDiv.innerHTML = d.resultado;
  document.getElementById('export-bar').style.display='block';
  document.getElementById('doubt-section').style.display='block';
}

async function askAura() {
  const q = document.getElementById('doubt-q').value;
  const ctx = document.getElementById('res').innerText;
  const fd = new FormData();
  fd.append("pregunta", q);
  fd.append("contexto", ctx);
  fd.append("lang", currentLang);
  const r = await fetch("/aclarar-duda", {method:"POST", body:fd});
  const d = await r.json();
  document.getElementById('doubt-res').innerHTML = d.resultado;
}

async function loginAdmin(){
  const fd = new FormData();
  fd.append("user", document.getElementById('admin-user').value);
  fd.append("pw", document.getElementById('admin-pass').value);
  const r = await fetch("/login-admin", {method:"POST", body:fd});
  if(r.ok){
    document.getElementById('paywall').style.display='none';
    document.getElementById('sistema-aura').style.display='block';
  } else { alert("Acceso denegado."); }
}
</script>
</body>
</html>
