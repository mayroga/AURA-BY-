<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA by May Roga LLC</title>
    <style>
        body { font-family: 'Segoe UI', Arial; background: #000; color: #fff; margin: 0; }
        .marquee { background: #001a33; border-bottom: 2px solid #00d4ff; overflow: hidden; white-space: nowrap; padding: 15px 0; }
        .marquee-content { display: inline-block; animation: scroll 35s linear infinite; color: #00d4ff; font-weight: 900; font-size: 1.2rem; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
        .container { max-width: 1100px; margin: auto; padding: 25px; border: 2px solid #333; border-radius: 40px; background: #080808; margin-top: 10px; }
        .yellow { color: #ffff00; font-weight: bold; font-size: 1.5rem; }
        .btn-ex { padding: 12px 20px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; margin: 5px; transition: 0.3s; }
        input { padding: 18px; border-radius: 15px; border: 2px solid #00d4ff; background: #000; color: #fff; margin: 10px; font-size: 1.2rem; width: 90%; }
        
        /* Estilos de Tabla AURA */
        .res-box { display: none; margin-top: 25px; padding: 20px; border-radius: 20px; background: #0a0a0a; border: 1px solid #444; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #111; color: #fff; }
        th { background: #00d4ff; color: #000; padding: 12px; text-align: left; }
        td { border-bottom: 1px solid #333; padding: 12px; }
        .premium-row { background: #221a00; border: 2px solid #ffff00; }
        
        .doubt-section { margin-top: 30px; border: 2px solid #ffff00; padding: 25px; border-radius: 25px; display: none; background: #050505; }
        .plan-card { border: 2px solid #00d4ff; border-radius: 20px; padding: 15px; margin: 10px; display: inline-block; width: 28%; vertical-align: top; }
        .btn-pay { background: #00d4ff; color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="marquee">
    <div class="marquee-content" id="marquee-text">
        AURA BY MAY ROGA LLC: PROFESSIONAL ADVISORY â€¢ PRICE TRANSPARENCY â€¢ NOT A MEDICAL ORDER â€¢ INDEPENDENT ESTIMATES â€¢
    </div>
</div>

<div class="container">
    <h1 style="color: #00d4ff; font-size: 4rem; margin: 0;">AURA</h1>
    <div class="yellow">by May Roga LLC</div>

    <div class="lang-box" style="margin: 20px;">
        <button class="btn-ex" style="background:#00d4ff; color:#000;" onclick="changeLang('es')">ESPAÃ‘OL</button>
        <button class="btn-ex" style="background:#fff; color:#000;" onclick="changeLang('en')">ENGLISH</button>
    </div>

    <div id="paywall">
        <div class="plan-card"><h4>QUICK</h4><p>$5.99</p><button class="btn-pay" onclick="pagar('rapido')">ACCESS</button></div>
        <div class="plan-card"><h4>STANDARD</h4><p>$9.99</p><button class="btn-pay" onclick="pagar('standard')">ACCESS</button></div>
        <div class="plan-card"><h4>SPECIAL</h4><p>$19.99</p><button class="btn-pay" onclick="pagar('special')">ACCESS</button></div>
    </div>

    <div id="sistema-aura" style="display:none;">
        <div id="geo-txt" class="yellow">Detecting Location...</div>
        <div style="margin: 20px;">
            <button onclick="listen()" title="Dictate" style="background:none; border:none; cursor:pointer; font-size: 2rem;">ðŸŽ¤</button>
            <button onclick="readOut()" title="Listen" style="background:none; border:none; cursor:pointer; font-size: 2rem;">ðŸ”Š</button>
        </div>
        <input type="text" id="q" placeholder="Enter procedure, symptom or code...">
        <button class="btn-pay" onclick="getEstimate()" style="font-size:1.5rem; margin-top:10px;">REVEAL COMPARISON</button>

        <div id="res" class="res-box"></div>

        <div id="export-bar" style="display:none; margin-top:20px;">
            <button class="btn-ex" style="background:#ff9500;" onclick="window.print()">PRINT / PDF</button>
        </div>

        <div id="doubt-section" class="doubt-section">
            <h3 style="color:#ffff00;">PROFESSIONAL ADVISORY: CLARIFY DOUBTS</h3>
            <input type="text" id="doubt-q" placeholder="Ask our expert advisor...">
            <button class="btn-pay" onclick="askAura()">GET CLARIFICATION</button>
            <div id="doubt-res" style="margin-top:15px; color:#00d4ff; text-align: left; border-top: 1px solid #333; padding-top: 10px;"></div>
        </div>
    </div>

    <div class="legal-box" style="margin-top:40px; font-size:0.7rem; color:#666; text-align: justify; border-top: 1px solid #222; padding: 20px;">
        LEGAL DISCLAIMER: Aura by May Roga LLC is an independent advisory service. We are not doctors, medical facilities, or insurance companies. This report provides educational estimates based on public market data. No information herein constitutes medical advice or a government mandate.
    </div>
</div>

<script>
let currentLang = 'en';
let userZip = "";

async function getGeo() {
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(async pos => {
            const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&localityLanguage=en`);
            const d = await r.json();
            userZip = d.postcode || "33101";
            document.getElementById('geo-txt').innerText = `Location: ZIP ${userZip}`;
        });
    }
}
window.onload = getGeo;

async function getEstimate() {
    const q = document.getElementById('q').value;
    const resDiv = document.getElementById('res');
    resDiv.style.display='block';
    resDiv.innerHTML = "<p class='yellow'>AURA Advisor analyzing market data...</p>";

    const fd = new FormData();
    fd.append("consulta", q);
    fd.append("lang", currentLang);
    fd.append("zip_user", userZip);

    const r = await fetch("/estimado", {method:"POST", body:fd});
    const d = await r.json();
    resDiv.innerHTML = d.resultado;
    document.getElementById('export-bar').style.display='block';
    document.getElementById('doubt-section').style.display='block';
}

async function askAura() {
    const dq = document.getElementById('doubt-q').value;
    const dres = document.getElementById('doubt-res');
    dres.innerHTML = "Processing advisory response...";
    const fd = new FormData();
    fd.append("consulta", dq);
    fd.append("lang", currentLang);
    const r = await fetch("/aclarar-duda", {method:"POST", body:fd});
    const d = await r.json();
    dres.innerHTML = d.resultado;
}

function changeLang(l) {
    currentLang = l;
    document.getElementById('marquee-text').innerText = l === 'es' ? 
        "AURA BY MAY ROGA LLC: ASESORÃA PROFESIONAL â€¢ TRANSPARENCIA DE PRECIOS â€¢" : 
        "AURA BY MAY ROGA LLC: PROFESSIONAL ADVISORY â€¢ PRICE TRANSPARENCY â€¢";
}

function listen() {
    const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    rec.lang = currentLang === 'es' ? 'es-US' : 'en-US';
    rec.onresult = e => { document.getElementById('q').value = e.results[0][0].transcript; };
    rec.start();
}

function readOut() { 
    const ut = new SpeechSynthesisUtterance(document.getElementById('res').innerText); 
    ut.lang = currentLang === 'es' ? 'es-US' : 'en-US';
    window.speechSynthesis.speak(ut); 
}

async function pagar(plan) {
    const fd = new FormData(); fd.append("plan", plan);
    const r = await fetch("/create-checkout-session", {method:"POST", body:fd});
    const d = await r.json();
    if(d.url) window.location.href = d.url;
}
</script>
</body>
</html>
