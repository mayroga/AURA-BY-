<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA by May Roga LLC</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #000; color: #fff; margin: 0; text-align: center; }
        .marquee { background: #001a33; border-bottom: 2px solid #00d4ff; overflow: hidden; white-space: nowrap; padding: 15px 0; }
        .marquee-content { display: inline-block; animation: scroll 35s linear infinite; color: #00d4ff; font-weight: 900; font-size: 1.2rem; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
        
        .container { max-width: 950px; margin: auto; padding: 25px; border: 3px solid #00d4ff; border-radius: 40px; background: #080808; margin-top: 10px; }
        .yellow { color: #ffff00; font-weight: bold; font-size: 1.5rem; }
        
        .search-hero { font-size: 1.3rem; color: #00d4ff; font-weight: bold; margin: 20px 0; border: 1px dashed #00d4ff; padding: 20px; border-radius: 20px; line-height: 1.5; }
        
        /* Layout Input y Borrar */
        .input-group { width: 90%; margin: 20px auto; display: flex; gap: 10px; align-items: center; }
        input { flex: 1; padding: 18px; border-radius: 15px; border: 2px solid #00d4ff; background: #000; color: #fff; font-size: 1.2rem; outline: none; }
        .clear-btn { background: #333; color: #ff4d4d; border: 2px solid #ff4d4d; border-radius: 15px; padding: 15px 20px; cursor: pointer; font-weight: bold; font-size: 1rem; transition: 0.3s; }
        .clear-btn:hover { background: #ff4d4d; color: #000; }

        .plan-card { border: 2px solid #00d4ff; border-radius: 20px; padding: 15px; margin: 10px; display: inline-block; width: 28%; vertical-align: top; background: #0a0a0a; }
        .btn-pay { background: #00d4ff; color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.1rem; transition: 0.3s; }
        .btn-pay:hover { background: #fff; transform: scale(1.02); }

        .res-box { text-align: left; padding: 25px; border: 1px dashed #00d4ff; background: #050505; margin-top: 25px; font-size: 1.1rem; line-height: 1.6; display: none; border-radius: 20px; }
        
        .btn-ex { padding: 12px 20px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; margin: 5px; color: white; transition: 0.2s; }
        .btn-ex:active { transform: translateY(2px); }

        .donacion-box { border: 5px solid #ffff00; border-radius: 35px; padding: 30px; margin-top: 40px; }
        .btn-donar { background: #ffff00; color: #000; border: none; padding: 20px; border-radius: 15px; font-weight: 900; width: 100%; cursor: pointer; font-size: 1.6rem; }

        .legal-box { font-size: 0.8rem; color: #777; margin-top: 30px; padding: 15px; border-top: 1px solid #333; }
        .doubt-section { margin-top: 20px; border: 2px solid #ffff00; padding: 20px; border-radius: 25px; display: none; }
    </style>
</head>
<body>

<div class="marquee">
    <div class="marquee-content" id="marquee-text">
        AURA BY MAY ROGA LLC: MEDICAL PRICE ESTIMATES FOR CONSUMERS ‚Ä¢ TOTAL TRANSPARENCY ‚Ä¢ MARKET DATA ONLY ‚Ä¢
    </div>
</div>

<div class="container">
    <h1 style="color: #00d4ff; font-size: 4rem; margin: 0;">AURA</h1>
    <div class="yellow">by May Roga LLC</div>

    <div class="search-hero" id="txt-hero">
        CONSULT USA MEDICAL & DENTAL PRICE ESTIMATES.<br>
        Enter procedure, symptom, or code for market range and fair price.
    </div>

    <div class="lang-box">
        <button class="btn-ex" style="background:#00d4ff; color:#000;" onclick="setLanguage('es')">ESPA√ëOL</button>
        <button class="btn-ex" style="background:#fff; color:#000;" onclick="setLanguage('en')">ENGLISH</button>
        <button class="btn-ex" style="background:#ff4d4d; color:#fff;" onclick="setLanguage('ht')">KREY√íL</button>
    </div>

    <div class="login-box" id="admin-area" style="margin: 20px auto; max-width: 400px; border: 1px solid #333; padding: 15px; border-radius: 20px;">
        <input type="text" id="admin-user" placeholder="Admin Username" style="font-size: 0.9rem; padding: 10px; width: 80%;">
        <input type="password" id="admin-pass" placeholder="Password" style="font-size: 0.9rem; padding: 10px; width: 80%;">
        <button class="btn-pay" onclick="loginAdmin()" id="btn-login-text" style="margin-top: 10px;">FREE ACCESS (ADMIN)</button>
    </div>

    <div id="paywall">
        <div class="plan-card">
            <h4 id="txt-p1-title">QUICK SEARCH</h4>
            <p>$5.99</p>
            <button class="btn-pay" onclick="iniciarPago('rapido')">PAY ACCESS</button>
        </div>
        <div class="plan-card">
            <h4 id="txt-p2-title">STANDARD</h4>
            <p>$9.99</p>
            <button class="btn-pay" onclick="iniciarPago('standard')">PAY ACCESS</button>
        </div>
        <div class="plan-card">
            <h4 id="txt-p3-title">SPECIAL</h4>
            <p>$19.99</p>
            <button class="btn-pay" onclick="iniciarPago('special')">PAY ACCESS</button>
        </div>
    </div>

    <div id="sistema-aura" style="display:none;">
        <div id="geo-txt" style="color: #ffff00; font-weight: bold; margin-bottom: 10px;">Searching location...</div>
        
        <div class="input-group">
            <input type="text" id="q" placeholder="Procedure, code or symptom...">
            <button class="clear-btn" id="btn-clear" onclick="document.getElementById('q').value=''">CLEAR</button>
        </div>

        <button class="btn-pay" onclick="getEstimate()" id="btn-reveal" style="font-size:1.8rem; width:90%;">REVEAL AURA COMPARISON</button>
        
        <div id="res" class="res-box"></div>
        
        <a id="map-link" class="map-btn" href="#" target="_blank" style="display:none; background: #ff4d4d; color:white; padding: 15px; border-radius: 15px; text-decoration: none; display: block; margin-top: 20px; font-weight: bold;">üìç VIEW CLINICS ON MAP (ZIP ZONE)</a>

        <div id="export-bar" style="display:none; margin-top:20px;">
            <button class="btn-ex" style="background:#25d366;" onclick="shareWA()">WhatsApp</button>
            <button class="btn-ex" style="background:#ffff00; color:#000;" onclick="readOut()" id="btn-listen">Listen</button>
            <button class="btn-ex" style="background:#ff9500; color:#000;" onclick="window.print()">PDF / Print</button>
        </div>

        <div id="doubt-section" class="doubt-section">
            <h3 id="txt-doubt-title" style="color:#ffff00;">DOUBTS ABOUT THIS REPORT?</h3>
            <input type="text" id="doubt-q" placeholder="Ask your follow-up question...">
            <button class="btn-pay" onclick="askAura()" id="btn-doubt">CLARIFY DOUBT</button>
            <div id="doubt-res" style="margin-top:15px; color:#00d4ff; text-align: left;"></div>
        </div>

        <div class="legal-box" id="txt-legal">
            LEGAL SHIELD: This report is issued by Aura by May Roga LLC. We are not doctors or insurers. This is an EDUCATIONAL ESTIMATE based on official CMS data and market dental prices.
        </div>
    </div>

    <div class="donacion-box">
        <h2 id="txt-donar-title" style="color:#ffff00; margin-top:0;">SOLIDARITY & EMPLOYMENT FUND</h2>
        <button class="btn-donar" onclick="iniciarPago('donacion')" id="btn-donar-text">MAKE VOLUNTARY DONATION</button>
    </div>
</div>

<script>
let currentLang = 'en';
let userZip = "";

const translations = {
    'es': {
        'marquee': 'AURA BY MAY ROGA LLC: ESTIMADOS DE PRECIOS M√âDICOS ‚Ä¢ TRANSPARENCIA TOTAL ‚Ä¢ SOLO INFORMACI√ìN DE MERCADO ‚Ä¢',
        'hero': 'CONSULTA ESTIMADOS DE PRECIOS M√âDICOS Y DENTALES EN USA.<br>Introduce procedimiento, s√≠ntoma o c√≥digo.',
        'p1': 'C. R√ÅPIDA', 'p2': 'STANDARD', 'p3': 'ESPECIAL',
        'pay_btn': 'PAGAR ACCESO',
        'clear': 'BORRAR',
        'reveal': 'REVELAR COMPARATIVA AURA',
        'placeholder': 'Procedimiento, c√≥digo o s√≠ntoma...',
        'geo': 'Detectando ubicaci√≥n...',
        'listen': 'Escuchar',
        'doubt_t': '¬øDUDAS SOBRE ESTE REPORTE?',
        'btn_doubt': 'ACLARAR DUDA',
        'legal': 'BLINDAJE LEGAL: Este reporte es emitido por Aura by May Roga LLC. No somos m√©dicos ni aseguradoras.',
        'fund': 'FONDO DE SOLIDARIDAD Y EMPLEO',
        'btn_donar': 'REALIZAR DONACI√ìN VOLUNTARIA'
    },
    'en': {
        'marquee': 'AURA BY MAY ROGA LLC: MEDICAL PRICE ESTIMATES ‚Ä¢ TOTAL TRANSPARENCY ‚Ä¢ MARKET DATA ONLY ‚Ä¢',
        'hero': 'CONSULT USA MEDICAL & DENTAL PRICE ESTIMATES.<br>Enter procedure, symptom, or code.',
        'p1': 'QUICK SEARCH', 'p2': 'STANDARD', 'p3': 'SPECIAL',
        'pay_btn': 'PAY ACCESS',
        'clear': 'CLEAR',
        'reveal': 'REVEAL AURA COMPARISON',
        'placeholder': 'Procedure, code or symptom...',
        'geo': 'Detecting location...',
        'listen': 'Listen',
        'doubt_t': 'DOUBTS ABOUT THIS REPORT?',
        'btn_doubt': 'CLARIFY DOUBT',
        'legal': 'LEGAL SHIELD: This report is issued by Aura by May Roga LLC. We are not doctors or insurers.',
        'fund': 'SOLIDARITY & EMPLOYMENT FUND',
        'btn_donar': 'MAKE VOLUNTARY DONATION'
    },
    'ht': {
        'marquee': 'AURA PA MAY ROGA LLC: ESTIMASYON PRI MEDIKAL ‚Ä¢ TRANSPARANS TOTAL ‚Ä¢ DONE MACHE S√àLMAN ‚Ä¢',
        'hero': 'KONSILTE ESTIMASYON PRI MEDIKAL AK DANT√à OZE.<br>Mete pwosedi, senpt√≤m oswa k√≤d.',
        'p1': 'CH√àCH√à RAPID', 'p2': 'ESTANDA', 'p3': 'ESPESYAL',
        'pay_btn': 'PEYE AKS√à',
        'clear': 'EFFACE',
        'reveal': 'REVELE KONPARAZON AURA',
        'placeholder': 'Pwosedi, k√≤d oswa senpt√≤m...',
        'geo': 'Ap detekte kote ou ye...',
        'listen': 'Koute',
        'doubt_t': 'DUD SOU RAP√í SA A?',
        'btn_doubt': 'KLARE DUD',
        'legal': 'PWOTEKSYON LEGAL: Rap√≤ sa a pibliye pa Aura pa May Roga LLC. Nou pa dokt√® ni asirans.',
        'fund': 'FONDASYON SOLIDARITE AK ANPLWA',
        'btn_donar': 'F√à YON DON VOLONT√à'
    }
};

function setLanguage(l) {
    currentLang = l;
    const t = translations[l];
    document.getElementById('marquee-text').innerText = t.marquee;
    document.getElementById('txt-hero').innerHTML = t.hero;
    document.getElementById('txt-p1-title').innerText = t.p1;
    document.getElementById('txt-p2-title').innerText = t.p2;
    document.getElementById('txt-p3-title').innerText = t.p3;
    document.querySelectorAll('.btn-pay').forEach(b => { if(b.innerText.includes('PAY') || b.innerText.includes('PAGAR') || b.innerText.includes('PEYE')) b.innerText = t.pay_btn; });
    document.getElementById('btn-clear').innerText = t.clear;
    document.getElementById('btn-reveal').innerText = t.reveal;
    document.getElementById('q').placeholder = t.placeholder;
    document.getElementById('btn-listen').innerText = t.listen;
    document.getElementById('txt-doubt-title').innerText = t.doubt_t;
    document.getElementById('btn-doubt').innerText = t.btn_doubt;
    document.getElementById('txt-legal').innerText = t.legal;
    document.getElementById('txt-donar-title').innerText = t.fund;
    document.getElementById('btn-donar-text').innerText = t.btn_donar;
}

async function getGeo() {
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(async pos=>{
            try {
                const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&localityLanguage=en`);
                const data = await r.json();
                userZip = data.postcode || "33101";
                document.getElementById('geo-txt').innerText = `Location: ZIP ${userZip}`;
            } catch { document.getElementById('geo-txt').innerText = "Location detected (USA)"; }
        });
    }
}

window.onload = () => { getGeo(); setLanguage('en'); };

async function iniciarPago(plan) {
    const response = await fetch("/create-checkout-session", {
        method: "POST",
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: `plan=${plan}`
    });
    const session = await r.json();
    const stripe = Stripe('TU_STRIPE_PUBLIC_KEY'); // Reemplaza con tu clave p√∫blica
    stripe.redirectToCheckout({ sessionId: session.id });
}

async function getEstimate() {
    const q = document.getElementById('q').value.trim();
    if(!q) return;
    const resDiv = document.getElementById('res');
    resDiv.style.display='block';
    resDiv.innerHTML = "<h2 class='yellow'>AURA ANALYZING MARKET DATA...</h2>";

    const fd = new FormData();
    fd.append("consulta", q);
    fd.append("lang", currentLang);
    fd.append("zip_user", userZip);

    try {
        const r = await fetch("/estimado", {method:"POST", body:fd});
        const d = await r.json();
        resDiv.innerHTML = d.resultado;
        
        document.getElementById('map-link').href = `https://www.google.com/maps/search/${encodeURIComponent(q)}+medical+near+${userZip}`;
        document.getElementById('export-bar').style.display='block';
        document.getElementById('doubt-section').style.display='block';
    } catch { resDiv.innerText = "Error contacting Aura Brain."; }
}

async function askAura() {
    const q = document.getElementById('doubt-q').value;
    const ctx = document.getElementById('res').innerText;
    const dRes = document.getElementById('doubt-res');
    dRes.innerText = "...";
    const fd = new FormData();
    fd.append("pregunta", q);
    fd.append("contexto", ctx);
    fd.append("lang", currentLang);
    const r = await fetch("/aclarar-duda", {method:"POST", body:fd});
    const d = await r.json();
    dRes.innerHTML = "<strong>AURA:</strong> " + d.resultado;
}

async function loginAdmin(){
    const fd = new FormData();
    fd.append("user", document.getElementById('admin-user').value);
    fd.append("pw", document.getElementById('admin-pass').value);
    const r = await fetch("/login-admin", {method:"POST", body:fd});
    if(r.ok){
        document.getElementById('paywall').style.display='none';
        document.getElementById('sistema-aura').style.display='block';
        document.getElementById('admin-area').style.display='none';
    } else { alert("Access Denied"); }
}

function readOut(){ 
    const ut = new SpeechSynthesisUtterance(document.getElementById('res').innerText); 
    ut.lang = currentLang === 'es' ? 'es-ES' : (currentLang === 'ht' ? 'fr-FR' : 'en-US');
    window.speechSynthesis.speak(ut); 
}
</script>
</body>
</html>
